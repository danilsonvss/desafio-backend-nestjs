---
alwaysApply: true
---

O projeto trata-se de uma API RestFull, criada com  NodeJs, TypeScript, NestJs, Prisma, PostgresSQL e Docker.

# **üéØ Plano de a√ß√£o global**

Desenvolver uma API RESTful que:

- Simule a exist√™ncia de um √∫nico produto com um produtor, um coprodutor e afiliado j√° definidos, apenas para fins de teste do fluxo.
- Receba dados de vendas nacionais e internacionais;
- Calcule taxas e comiss√µes conforme regras de neg√≥cio;
- Registre repasses para produtores, afiliados, coprodutores e plataforma;
- Atualize saldos individuais conforme cada transa√ß√£o.

## **üóÇÔ∏è Arquitetura Esperada**

- Arquitetura Modual
- DDD
- TDD
- Testes de integra√ß√£o
- Escalabilidade Horizontal

## **üß± Funcionalidades Obrigat√≥rias**

1. Cadastro e autentica√ß√£o de usu√°rio 
    - Cria√ß√£o;
    - Perfis distintos: produtor, afiliado, coprodutor e plataforma.

2. Sistema de taxas
    - Taxas configur√°veis via banco de dados;

3. Afilia√ß√£o e coprodu√ß√£o
    - Configura√ß√£o de percentuais de comiss√£o entre:
    - Produtor;
    - Afiliado;
    - Coprodutor;
    - Plataforma (tamb√©m pode reter comiss√£o).

4. Sistema de balances
    - Tabela de saldo por usu√°rio;
    - Toda transa√ß√£o atualiza os saldos conforme os repasses.

5. Pagamento de venda
    - Rota POST /payment;
    - Recebe valor, pa√≠s, participantes;
    - Simula aprova√ß√£o imediata (n√£o integrar adquirentes reais);
    - Calcula taxas por pa√≠s;
    - Aplica comiss√µes para cada participante;
    - Atualiza transa√ß√µes e saldos.

6. Boas pr√°ticas de seguran√ßa (LGPD + PCI)
    - Armazenamento seguro de dados sens√≠veis (hash/criptografia);
    - N√£o persistir dados de cart√£o ou pessoais sem tratamento adequado;
    - Controle de acesso conforme papel do usu√°rio.

## **üõ†Ô∏è Tecnologias Esperadas**

Voc√™ pode utilizar:

    - Node.js com TypeScript;
    - NestJS;
    - PostgreSQL;
    - Prisma.
    - Docker;
    - Testes unit√°rios e de integra√ß√£o;
    - Documenta√ß√£o Swagger ou similar.

## **üì¶ Entrega**

    - Suba o c√≥digo em um reposit√≥rio p√∫blico no GitHub.
    - Inclua um README com:
        - Instru√ß√µes para rodar o backend;
        - Scripts de inicializa√ß√£o e migra√ß√£o de banco;
        - Explica√ß√£o das regras de neg√≥cio implementadas.

## **‚úÖ Crit√©rios de Avalia√ß√£o**

- Organiza√ß√£o e clareza do c√≥digo;
- Arquitetura e boas pr√°ticas;
- Seguran√ßa no armazenamento de dados;
- Corre√ß√£o nas regras de taxas e comiss√µes;
- Uso eficiente do banco de dados;
- Clareza da documenta√ß√£o.
